This is the directory for the S2021 ACS final project.  
Compare the performance of PostgreSQL and SQLite on Raspberry Pi 4B 2GB RAM version.  
Yutong Xie: SQLite  
Yilu Zhou: PostgreSQL

# Database Benchmark Tool: TPC-H  
TPC-H is a decision support benchmark. It consists of a suite of business oriented ad-hoc queries and concurrent data modifications. The queries and the data populating the database have been chosen to have broad industry-wide relevance.

# Testing Device: Raspberry Pi 4B with 2GB RAM  
- Broadcom BCM2711, Quad core Cortex-A72 (ARM v8) 64-bit SoC @ 1.5GHz.
- 2GB LPDDR4-3200 SDRAM.
- Sandisk 32GB U1, A1, class10 TF card SDSQUNC-032G-ZN3MN. Read: 120MB/s Write: 10MB/s.
- Raspberry Pi OS with desktop 32-bit. Kernel version: 5.10.

# Testing Database
## PostgreSQL
- A free and open-source relational database management system emphasizing extensibility and SQL compliance.
- Transactions with Atomicity, Consistency, Isolation, Durability (ACID) to guarantee data validity despite errors, power failures.
- Evolved from the Ingres project at the University of California, Berkeley.
- Version: 13.2.

## SQLite3
- Not a clientâ€“server database engine.
- ACID-compliant and implements most of the SQL standard, generally following PostgreSQL syntax.
- A popular choice as embedded database software for local/client storage in application software such as web browsers. 
- Version: 3.35.5.

# Database Description
First a new database is created for both PostgreSQL and SQLite. Then, we use TPC-H to generate test data. The size of the data is about 1GB. The data are separated in 8 different tables.

|Table Name|Number of Entries|
|----|----|
|region|5|
|nation|25|
|partsupp|800000|
|customer|150000|
|lineitem|6001215|
|orders|1500000|
|part|200000|
|supplier|10000|

After the *.tbl data files are generated, they are imported into the tables of the test database.

# Query Description & Test Results
Then we use the same queries provided by TPC-H to test the performance of the databases. Because there are some differences in querying between PostgreSQL and SQLite, two different versions of queries are generated by TPC-H for compatibility. The queries can be found in the PGSQL_Queries and SQLITE_Queries. The time for each query are also recorded using time command of Linux.

|Query Number|Description|PostgreSQL Time(s)|SQLite Time(s)|
|-------|-----------|--------------|----------|
1|Pricing Summary Report|0.21|37.551|
2|Minimum Cost Supplier|41.816|1.487|
3|Shipping Priority|42.969|11.024|
4|Order Priority Checking|23.594|1.213|
5|Local Supplier Volume|22.624|6.351|
6|Forecasting Revenue Change|17.366|5.234|
7|Volume Shipping|15.578|22.046|
8|National Market Share|5.188|35.84|
9|Product Type Profit Measure|27.861|94.626|
10|Returned Item Reporting|10.791|5.337|
11|Important Stock Identification|4.346|3.109|
12|Shipping Modes and Order Priority|2.811|5.461|
13|Customer Distribution|5.651|78.3999|
14|Promotion Effect|27.018|7.241|
15|Create View for Top Supplier Query|8.102|5.486|
16|Parts/Supplier Relationship|13.233|2.008|
~~17~~|~~Small-Quantity-Order Revenue~~|~~N/A~~|~~N/A~~|
18|Large Volume Customer|14.61|6.101|
19|Discounted Revenue|2.249|7.265|
~~20~~|~~Potential Part Promotion~~|~~N/A~~|~~N/A~~|
21|Supplier Who Kept Orders Waiting|4.761|30.657|
~~22~~|~~Global Sales Opportunity~~|~~1.629~~|~~N/A~~|

It is worth noting that for query 17 and 20, both database cannot complete the query in 15 minutes. For query 22, SQLite cannot complete the query in 15 minutes. As a result, query 17, 20, and 22 are not considered in final performance comparison.
![Time Comparison](Picture1.svg)

# Conclusion


# Reference
